@styles
speaker Jordan color=#56C0FF
speaker Kara color=#FF6BAA
speaker Guard color=#D0D0D0
speaker Merchant color=#FFD580
speaker Elder color=#A0FF9F
speaker Thief color=#FF4F4F
speaker Narrator color=#AAAAAA

button.default color=#333333
button.primary color=#2D6CDF
button.danger color=#B00020
button.success color=#28A745
button.warning color=#FFC107
@endstyles

@start
Narrator: {italic}The wind howls through the empty streets...{/}
Jordan: Kara, we need to decide. [Go to the market -> @market_entry]{class=primary} [Head to the guard tower -> @guard_tower_entry]{class=warning} [Check map -> ui:map/open]{color=#00FFC8}
Kara: Or we could {bold}just{/} go home. [Go home -> @go_home]{class=danger}

@market_entry
Merchant: Welcome! Care to browse? [Yes -> @market_browse]{class=primary} [No -> @market_leave]{class=danger}
Jordan: {italic}I’m not sure we have time for this...{/}

@market_browse
Merchant: We have potions, weapons, and secrets.  
[Buy potion -> shop:potions/buy_health]{class=success} [Buy sword -> shop:weapons/buy_sword]{class=success} [Buy shield -> shop:armor/buy_shield]{class=success} [Buy cloak -> shop:armor/buy_cloak]{class=success}
[Buy lockpick -> shop:tools/buy_lockpick]{class=success} [Buy lantern -> shop:tools/buy_lantern]{class=success} [Buy map -> shop:tools/buy_map]{class=success} [Ask about rumors -> @market_rumors]
[Buy chain -> shop:tools/buy_chain]{class=success}
Kara: Or we could {color=#FF00FF}steal{/} something. [Steal -> @market_steal]{class=danger}
Merchant: Anything else catch your eye?  
[Buy rope -> shop:tools/buy_rope]{class=success} [Buy apple -> shop:food/buy_apple]{class=success} [Buy mysterious box -> shop:misc/buy_mystery_box]{class=warning} [Ask for discount -> @market_discount]

@market_discount
Merchant: For you, a special price! [Accept offer -> shop:apply_discount]{class=success} [Haggle more -> @market_haggle]{class=warning} [Decline -> @market_browse]

@market_haggle
Merchant: Hmm... you drive a hard bargain. [Final offer -> shop:apply_final_discount]{class=success} [No thanks -> @market_browse]


@market_rumors
Merchant: They say the {bold}Elder{/} is hiding something in the forest. [Go to forest -> @forest_entry] [Back -> @market_browse]

@market_steal
Thief: {italic}Psst{/}, I saw that. Want in on a bigger job? [Yes -> @thief_job_offer]{class=primary} [No -> @market_browse]

@thief_job_offer
Thief: Meet me at midnight by the docks. [Agree -> @docks_meet] [Refuse -> @market_browse]

@market_leave
Jordan: Let’s move on. [Go to forest -> @forest_entry] [Go to guard tower -> @guard_tower_entry]

@forest_entry
Elder: Welcome, travelers. Do you seek wisdom or danger?  
[Wisdom -> @forest_wisdom]{class=primary} [Danger -> @forest_danger]{class=danger} [Leave -> @market_entry]

@forest_wisdom
Elder: The path ahead is treacherous. {italic}Beware the red moon.{/} [Continue -> @forest_clearing] [Back -> @forest_entry]

@forest_danger
Elder: Then face the beast! [Fight -> battle:forest/beast] [Run -> @forest_entry]

@forest_clearing
Narrator: You arrive at a quiet clearing.  
Jordan: Something feels {bold}off{/}... [Investigate -> @forest_investigate] [Rest -> @forest_rest]

@forest_investigate
Narrator: You find a hidden trapdoor. [Open -> @trapdoor_entry] [Ignore -> @forest_clearing]

@forest_rest
Kara: Let’s take a break. [Sleep -> time:advance/8_hours] [Back -> @forest_clearing]

@trapdoor_entry
Narrator: The trapdoor creaks open, revealing darkness. [Climb down -> @underground_entry] [Close -> @forest_investigate]

@underground_entry
Guard: Halt! How did you get here? [Lie -> @underground_lie] [Tell truth -> @underground_truth]

@underground_lie
Guard: I don’t believe you. [Fight -> battle:underground/guard] [Run -> @underground_entry]

@underground_truth
Guard: Huh. Well, you’re here now. [Proceed -> @underground_chamber]

@underground_chamber
Narrator: The chamber glows with strange light.  
[Touch crystal -> magic:crystal/activate]{class=primary} [Leave -> @underground_entry]

@guard_tower_entry
Guard: State your business. [Visit Kara’s friend -> @friend_visit] [Inspect tower -> @tower_interior] [Leave -> @market_entry]

@friend_visit
Kara: My friend works here. [Talk -> @friend_talk] [Leave -> @guard_tower_entry]

@friend_talk
Friend: Good to see you! Need help? [Yes -> @friend_help] [No -> @friend_visit]

@friend_help
Friend: I can open the gate for you. [Open gate -> city:gate/open]{class=success} [Not now -> @friend_visit]

@tower_interior
Narrator: The tower is old and dusty. [Climb -> @tower_top] [Leave -> @guard_tower_entry]

@tower_top
Narrator: You see the whole city from here. [Signal Kara -> @signal_kara] [Climb down -> @tower_interior]

@signal_kara
Kara: I see you! [Wave back -> @tower_top] [Ignore -> @tower_interior]

@docks_meet
Thief: You came. Ready? [Yes -> @docks_job] [No -> @market_entry]

@docks_job
Narrator: The job is risky. [Accept -> heist:docks/start]{class=primary} [Decline -> @market_entry]

@go_home
Narrator: You return home. The adventure ends here. [Restart -> ui:game/restart]{class=danger}